@model MyCollections.ViewModels.CollectionItemsViewModel;

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


<div class="widget widget-comments open" id="comments">
    <div class="block-title">
        [
        @if (Model.Items != null)
        {
            @Model.Items.Count
        }
        ] Коллекция @Model.UserCollection.Name пользователя @Model.User.UserName
    </div>

    @if (Model.Items != null)
    {
        <table class="table table-borderless table-bordered">
            <thead class="text-dark">
            <tr>
                <th>

                </th>

                <th>
                    image
                </th>

                <th>
                    Item
                </th>

            </tr>
            </thead>

            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>
                        @if (User.Identity.Name == Model.User.UserName)
                        {
                            <form method="post">

                                <div class="dropdown">
                                    <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                                        Действие
                                    </a>

                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                        <li>
                                            <input class="btn btn-outline-danger" type="submit" name="Id" value="Delete" formmethod="post" formaction="~/Collection/DeleteCollectionItem" style="border-color: white" onSubmit="window.location.reload()"/>
                                            <input name="IdCollection" value="@Model.UserCollection.Id" style="visibility: hidden" size="1"/>
                                            <input name="IdItem" value="@item.Id" style="visibility: hidden" size="1"/>
                                            <input name="IdUser" value="@Model.User.Id" style="visibility: hidden" size="1"/>
                                        </li>
                                    </ul>
                                </div>
                            </form>
                        }
                    </td>

                    <td>
                        <img src="@Url.Content(item.Image)" style="width: 150px; height: 200px;" alt=""/>
                    </td>
                    <td>
                        <form method="post" asp-action="ItemProfile">
                            <p>
                                <input type="submit" name="button" value="@item.Name" class="btn btn-link text-dark" formaction="~/Collection/ItemProfile">
                                <input name="id" value="@item.Id" style="visibility: hidden" size="1"/>
                            </p>
                        </form>

                        <ul>
                            <li>
                                @item.Tag
                            </li>
                            <li>
                                @item.Description
                            </li>
                            @foreach (var field in @Model.ExtendedFields)
                            {
                                <li>
                                    @field.Name;
                                </li>
                            }

                        </ul>


                    </td>
                </tr>
            }
        </table>
    }
</div>